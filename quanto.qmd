---
title: "Untitled"
format: revealjs
editor: visual
---

## Quarto

Quarto enables you to weave together content and executable code into a finished presentation. To learn more about Quarto presentations see <https://quarto.org/docs/presentations/>.

## Bullets

When you click the **Render** button a document will be generated that includes:

-   Content authored with markdown
-   Output from executable code

## Code

Ce support de présentation va présenter quelques datavisualisations sur le jeux de données foret.

## graphique 1

```{r}
# changement librairies ---------------------------------------------------
library(readr)
library(highcharter)
library(echarts4r)
#require(tm)
#require(corpus)
library(readxl)
library(tidyverse)
library(ggplot2)
library(RColorBrewer)
# read_delim("https://data.gouv.nc/api/v2/catalog/exports/csv?delimiter=%2C&lang=fr")
library(viridisLite)
library(httr)
library(jsonlite)
library(geojsonio)
library(paletteer) 
#paletteer_d("palettesForR::Echo")
library(htmlwidgets)
library(readr)
library(viridis)


df_foret <- read_csv("tab-foret.csv")
evol<-  df_foret %>% arrange(Annee) %>%
    # group_by(COMMUNE) %>% count() %>% arrange(desc(n)) %>%
    hchart(type= 'line', hcaes(x=Annee, y =Surface.brulee, group=COMMUNE)) %>%
    hc_yAxis(title = list(text = "Surfaces brulées en hectares")) %>%
    hc_xAxis(title = list(text = "Année")) %>%
    hc_title(text="Evolution des surfaces brulées par communes (en hectares)") %>%
  # hc_colors( brewer.pal(n =  length(unique(df_foret$COMMUNE)), name = "Spectral"))   
  hc_colors(c("#19AEFFFF","#0084C8FF","#005C94FF" ,"#FF4141FF" ,"#DC0000FF", "#B50000FF" , "#FFFF3EFF" , "#FF9900FF" , "#FF6600FF" , "#FFC022FF" , "#B88100FF" , "#804D00FF" , "#CCFF42FF",
              "#9ADE00FF", "#009100FF", "#F1CAFFFF", " #D76CFFFF", " #BA00FFFF", " #BDCDD4FF", " #9EABB0FF", " #364E59FF", " #0E232EFF", " #FFFFFFFF", " #CCCCCCFF", " #999999FF", "#666666FF", "#2D2D2DFF"))

evol
```

## graphique 2

```{r}
df_foret %>% group_by(Annee)  %>% summarise(sum_surt_tot = sum(Surface.brulee), sum_nb_feux=sum(nb_depart_de_feu)) %>%
  hchart(type= 'line', hcaes(x=Annee, y =sum_surt_tot), name="surfaces cumulées") %>%
  hc_yAxis(title = list(text = "Surfaces brulées en hectares")) %>%
  hc_xAxis(title = list(text = "Année")) %>%
  hc_title(text="Evolution des surfaces brulées cumulées par année ") %>%
  hc_caption(text= "somme des surfaces pour toutes les communes")
```

## graphique 3

```{r}
df_foret %>% group_by(Annee)  %>% summarise(sum_surt_tot = sum(Surface.brulee), sum_nb_feux=sum(nb_depart_de_feu)) %>%
  hchart(type= 'column', hcaes(x=Annee, y =sum_nb_feux), name="nombre de départs de feux") %>%
  hc_yAxis(title = list(text = "Surfaces brulées en hectares")) %>%
  hc_xAxis(title = list(text = "Année")) %>%
  hc_title(text="Nombre de départ de feux")
```

## graphique 4

```{r}
cols <- viridis(length(unique(df_foret$Annee)))

df_foret %>% group_by(COMMUNE, Annee)  %>% summarise(sum_surt_tot = sum(Surface.brulee), sum_nb_feux=sum(nb_depart_de_feu)) %>%
  hchart(type= 'bar', hcaes(x=COMMUNE, y =sum_nb_feux, group=Annee), stacking = "normal") %>%
  hc_yAxis(title = list(text = "nombre de départ de feux")) %>%
  hc_xAxis(title = list(text = "Année")) %>%
  hc_title(text="Nombre de départ de feux") %>%
  hc_colors(cols) %>%
  hc_legend(align = "center",verticalAlign = "bottom")
```

## graphique 5

```{r}
cols2 <- viridis(length(unique(df_foret$nb_depart_de_feu)))

df_foret %>% group_by(COMMUNE, Annee)  %>% summarise(sum_surt_tot = sum(Surface.brulee), sum_nb_feux=sum(nb_depart_de_feu)) %>%
  hchart(type= 'bar', hcaes(x=COMMUNE, y =sum_surt_tot, group=Annee), stacking = "normal") %>%
  hc_yAxis(title = list(text = "Surface brulée")) %>%
  hc_xAxis(title = list(text = "Année")) %>%
  hc_title(text="Nombre de départ de feux") %>%
  hc_colors(cols2) %>%
  hc_legend(align = "center",verticalAlign = "bottom")
```
